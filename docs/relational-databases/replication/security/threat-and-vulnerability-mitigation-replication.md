---
title: 威胁和漏洞缓解（复制）| Microsoft Docs
ms.custom: ''
ms.date: 03/07/2017
ms.prod: sql
ms.prod_service: database-engine
ms.component: replication
ms.reviewer: ''
ms.suite: sql
ms.technology:
- replication
ms.tgt_pltfrm: ''
ms.topic: conceptual
helpviewer_keywords:
- attacks [SQL Server replication]
- threats [SQL Server replication security]
- security [SQL Server replication], threats
- security threats [SQL Server replication]
ms.assetid: 314fe497-56d8-4192-98e9-21b87cf8db04
caps.latest.revision: 11
author: MashaMSFT
ms.author: mathoma
manager: craigg
ms.openlocfilehash: d3c12b35ff354df2e3e89e45abdd5c08a42ee5b4
ms.sourcegitcommit: 1740f3090b168c0e809611a7aa6fd514075616bf
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/03/2018
ms.locfileid: "32963062"
---
# <a name="threat-and-vulnerability-mitigation-replication"></a>威胁和漏洞缓解（复制）
[!INCLUDE[appliesto-ss-xxxx-xxxx-xxx-md](../../../includes/appliesto-ss-xxxx-xxxx-xxx-md.md)]
  本主题介绍减少复制拓扑所面临威胁的技术。  
  
## <a name="encryption"></a>加密  
 加密是把数据转换成没有特殊密钥就不能读取、而只有特定的接收者能够读取的数据格式的过程。 复制并不加密存储在表中或通过网络连接发送的数据。 这是有意设计的，因为在传输层有多种加密技术可以使用，其中包括下列行业标准技术：虚拟专用网络 (VPN)、安全套接字层 (SSL) 和 IP 安全 (IPSEC)。 建议对复制拓扑中各计算机之间的连接，使用这些加密方法之一。 有关详细信息，请参阅[启用数据库引擎的加密连接（SQL Server 配置管理器）](../../../database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine.md)。 有关使用 VPN 和 SSL 在 Internet 上复制数据的信息，请参阅 [Securing Replication Over the Internet](../../../relational-databases/replication/security/securing-replication-over-the-internet.md)。  
  
 如果使用 SSL 来确保复制拓扑中计算机间的连接安全，请为每个复制代理的 **-EncryptionLevel** 参数指定值 **1** 或 **2** （建议指定值 **2** ）。 值 **1** 指定使用加密，但是代理不验证 SSL 服务器证书是否由可信颁发者签名；值 **2** 指定证书要经过验证。 代理参数可以在代理配置文件和命令行中指定。 有关详细信息，请参阅：  
  
-   [处理复制代理配置文件](../../../relational-databases/replication/agents/work-with-replication-agent-profiles.md)  
  
-   [查看和修改复制代理命令提示符参数 &#40;SQL Server Management Studio&#41;](../../../relational-databases/replication/agents/view-and-modify-replication-agent-command-prompt-parameters.md)  
  
-   [Replication Agent Executables Concepts](../../../relational-databases/replication/concepts/replication-agent-executables-concepts.md)  
  
 就数据库主密钥（用于加密数据）而言，复制具有以下行为：  
  
-   如果复制所涉及的数据库（发布数据库、订阅数据库或分发数据库）中有主密钥，则复制使用 [!INCLUDE[ssSQL11](../../../includes/sssql11-md.md)] 数据库对称密钥对该数据库中的代理密码进行加密和解密。 如果使用主密钥，则应在复制所涉及的每个数据库中都创建主密钥。 有关创建主密钥的详细信息，请参阅 [CREATE MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/create-master-key-transact-sql.md)。  
  
-   复制不会复制主密钥。 如果要求订阅服务器上有主密钥，则必须用 BACKUP MASTER KEY 从发布数据库导出主密钥，然后用 RESTORE MASTER KEY 将其导入订阅数据库。 有关详细信息，请参阅 [BACKUP MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/backup-master-key-transact-sql.md) 和 [RESTORE MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/restore-master-key-transact-sql.md)。  
  
-   如果为可附加的订阅数据库定义了主密钥，请使用 [sp_attachsubscription &#40;Transact-SQL&#41;](../../../relational-databases/system-stored-procedures/sp-attachsubscription-transact-sql.md) 的 **@db_master_key_password** 参数指定主密钥密码。 这样就可以在订阅服务器上附加数据库了。  
  
 有关加密以及主密钥的详细信息，请参阅 [Encryption Hierarchy](../../../relational-databases/security/encryption/encryption-hierarchy.md)。  
  
 通过使用复制，您可以发布加密的列数据。 若要在订阅服务器上解密并使用此数据，则订阅服务器上也必须有用于在发布服务器上加密该数据的密钥。 复制并不提供安全机制来传输加密密钥。 您必须在订阅服务器上手动重新创建加密密钥。 有关详细信息，请参阅[复制加密列中的数据 &#40;SQL Server Management Studio&#41;](../../../relational-databases/replication/security/replicate-data-in-encrypted-columns-sql-server-management-studio.md)。  
  
## <a name="see-also"></a>另请参阅  
 [标识和访问控制（复制）](../../../relational-databases/replication/security/identity-and-access-control-replication.md)   
 [安全性概述（复制）](../../../relational-databases/replication/security/security-overview-replication.md)   
 [安全开发（复制）](../../../relational-databases/replication/security/secure-development-replication.md)   
 [安全部署（复制）](../../../relational-databases/replication/security/secure-deployment-replication.md)  
  
  
